# 템플릿 문법 (Template Syntax)

노드를 정적인 데이터들로만 작성하면, 동적으로 변경되는 사용자 파라미터에 대응하는 Flow를 작성할 수 없습니다.
동적으로 변하는 상황에 대응하기 위해, CLOSER에서는 각 Node를 작성할 때 사용할 수 있는 [템플릿 엔진](https://en.wikipedia.org/wiki/Template_processor) 을 제공합니다.

템플릿은 정해진 위치에 파라미터를 주입할 수 있는 금형에 비유할 수 있습니다. 봇 빌더에서 동적인 파라미터가 필요한 공간에 중괄호 2개로 감싸진 파라미터 {% raw %}`{{파라미터명}}`{% endraw %}을 삽입해 놓으면, 실제 봇이 사용자 요청을 처리할 때 다음과 같은 결과를 반환합니다. 

{% raw %}
- ##### 템플릿
```
입력하신 전화번호는 {{phoneNumber}} 입니다.
```
- ##### 입력받은 파라미터
```json
{ "phoneNumber": "01012345678" }
```
- ##### 결과
```
입력하신 전화번호는 01012345678입니다.
```
{% endraw %}

만일 템플릿에 입력된 파라미터가 존재하지 않는 경우, 템플릿 엔진은 `undefined` 값을 반환합니다.

{% raw %}
- ##### 템플릿
```
{{존재하지_않는_파라미터}}가 입력되었습니다.
```
- ##### 결과
```
undefined가 입력되었습니다.
```
{% endraw %}

이 경우 작성된 Node가 제대로 동작하지 않을 수 있기 때문에, 템플릿 엔진 사용시에는 각별한 주의가 필요합니다.

템플릿 엔진은 사용자 정의 파라미터 외에도 [예약 파라미터](/chapter1/c790-c720-b86d-ac8c-bd07-c124-acc4-d558-ae3028-flow-editor/b178-b4dc/d30c-b77c-bbf8-d13028-parameter.md#reserved-parameters)를 사용할 수 있으며, 나아가 더 다양하고 복잡한 로직을 작성할 수 있는 [템플릿 함수](#template-functions)를 제공합니다.


## 템플릿 함수 (Template Functions) {#template-functions}

| 함수 | 설명 |
| :--- | :--- |
| `DATE()` | 현재 시각 |
| `DATE(time)` | 입력된 ISO String / UNIX Timestamp 시각 |
| `RAND()` | 랜덤한 정수 |
| `RAND(n)` | 0 ~ n 사이의 랜덤한 정수 | 
| `RAND(a,b)` | a ~ b 사이의 랜덤한 정수 |
| `RAND("문자열1", "문자열2", "문자열3", ..., "문자열n")` | 2개 이상의 문자열 중 하나 (`문자열1`, `문자열2` 또는 ... `문자열n`) |


예를 들어, 10부터 15 사이의 랜덤한 정수를 얻고 싶을 때는 다음과 같이 사용할 수 있습니다.

{% raw %}
- ##### 템플릿
```
{{RAND(10,15)}}
```
- ##### 결과
```js
10, 11, 12, 13, 14 또는 15
```
{% endraw %}

문자열 사용 예시

{% raw %}
- ##### 템플릿
```
{{RAND("가위","바위","보")}}
```
- ##### 결과
```js
"가위", "바위" 또는 "보"
```
{% endraw %}


쌍따옴표를 사용하려면 다음과같이 `\"` 로 쓸 수 있습니다.
{% raw %}
- ##### 템플릿
```
RAND("토끼: \"안녕?\"","토끼: \"반가워\"")
```
- ##### 결과
```
"토끼: "안녕?"" 또는 "토끼: "반가워""
```
{% endraw %}



